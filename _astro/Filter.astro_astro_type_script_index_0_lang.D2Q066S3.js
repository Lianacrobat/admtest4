import{g as y,a as E,b as p}from"./productUtils.Du6jOUUm.js";let a={search:"",category:"",subcategory:"",variant:"",status:"",condition:"",calidad:""},m=E(),L=y();function b(){const e=document.getElementById("filterIcon");Object.values(a).some(n=>n!=="")?(e.innerHTML=`
				<path stroke="none" d="M0 0h24v24H0z" fill="none"/>
				<path d="M8 4h12v2.172a2 2 0 0 1 -.586 1.414l-3.914 3.914m-.5 3.5v4l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227" />
				<path d="M3 3l18 18" />
			`,e.classList.add("text-[var(--accent-color)]")):(e.innerHTML=`
				<path stroke="none" d="M0 0h24v24H0z" fill="none"/>
				<path d="M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z" />
			`,e.classList.remove("text-[var(--accent-color)]"))}function i(){let e=[...m];if(a.search){const t=a.search.toLowerCase();e=e.filter(n=>n.name.toLowerCase().includes(t)||n.shortDescription?.toLowerCase().includes(t)||n.category.toLowerCase().includes(t)||n.subcategory.toLowerCase().includes(t)||n.tags.some(c=>c.toLowerCase().includes(t)))}a.category&&(e=e.filter(t=>t.category===a.category)),a.subcategory&&(e=e.filter(t=>t.subcategory===a.subcategory)),a.variant&&(e=e.filter(t=>t.variant.includes(a.variant))),a.status&&(e=e.filter(t=>t.status===a.status)),a.condition&&(e=e.filter(t=>t.condition===a.condition)),a.calidad&&(e=e.filter(t=>t.calidad===a.calidad)),b(),window.dispatchEvent(new CustomEvent("productsFiltered",{detail:{products:e,filters:a}}))}function g(e){const t=document.getElementById("subcategory");if(e){const n=p(e);t.innerHTML='<option value="">Subcategorías</option>',n.forEach(c=>{const r=document.createElement("option");r.value=c,r.textContent=c,t.appendChild(r)})}else t.innerHTML='<option value="">Subcategorías</option>',L.forEach(n=>{const c=document.createElement("option");c.value=n,c.textContent=n,t.appendChild(c)});a.category!==e&&(a.subcategory="",t.value="")}function f(){const e=document.getElementById("search"),t=document.getElementById("category"),n=document.getElementById("subcategory"),c=document.getElementById("status"),r=document.getElementById("condition"),s=document.getElementById("calidad"),l=document.getElementById("variant"),d=document.getElementById("clearFilters");if(!e||!t||!n||!c||!r||!s||!l||!d)return;let u;e.addEventListener("input",o=>{clearTimeout(u),u=setTimeout(()=>{a.search=o.target.value,i()},300)}),t.addEventListener("change",o=>{const v=o.target.value;a.category=v,g(v),i()}),n.addEventListener("change",o=>{a.subcategory=o.target.value,i()}),c.addEventListener("change",o=>{a.status=o.target.value,i()}),r.addEventListener("change",o=>{a.condition=o.target.value,i()}),s.addEventListener("change",o=>{a.calidad=o.target.value,i()}),l.addEventListener("change",o=>{a.variant=o.target.value,i()}),d.addEventListener("click",()=>{a={search:"",category:"",subcategory:"",status:"",condition:"",calidad:"",variant:""},e.value="",t.value="",n.value="",c.value="",r.value="",s.value="",l.value="",g(""),i()}),i(),window.dispatchEvent(new CustomEvent("productsFiltered",{detail:{products:m,filters:a}}))}function h(){const e=document.querySelectorAll("input, select");e.length!==0&&e.forEach(t=>{t.addEventListener("focus",function(){this.style.borderColor="var(--accent-color)"}),t.addEventListener("blur",function(){this.style.borderColor="var(--cajas)"})})}document.addEventListener("DOMContentLoaded",()=>{f(),h()});document.addEventListener("astro:page-load",()=>{f(),h()});
